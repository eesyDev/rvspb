(()=>{function r(e){var t=e.closest(".switch-wrapper");if(!t)return null;var a=e.dataset.panelFor||e.name||e.id;if(a){a=t.querySelector('.switch-panel[data-panel-for="'+a+'"]');if(a)return a}a=[...t.querySelectorAll(".switch-outer .service")],t=[...t.querySelectorAll(".switch-panel")],a=a.indexOf(e);return-1<a&&t[a]||null}document.addEventListener("change",function(e){var t,a,i;e.target.matches(".service")&&(e.target.closest(".switch-wrapper"),t=r(e.target),e.target.checked,a=t,i=e.target.checked,a)&&(a.setAttribute("aria-hidden",String(!i)),a.classList.toggle("is-open",i),a.querySelectorAll("input, select, textarea, button").forEach(e=>{e.classList.contains("service")||(e.disabled=!i),i||"checkbox"!==e.type&&"radio"!==e.type||(e.checked=!1)}),i?a.style.maxHeight=a.scrollHeight+"px":(a.style.maxHeight=a.scrollHeight+"px",requestAnimationFrame(()=>{a.style.maxHeight="0px"})))}),document.querySelectorAll(".service").forEach(e=>{var t=r(e);t&&(e.checked?(t.classList.add("is-open"),t.style.maxHeight=t.scrollHeight+"px",t.setAttribute("aria-hidden","false"),t.querySelectorAll("input, select, textarea, button").forEach(e=>{e.classList.contains("service")||(e.disabled=!1)})):(t.setAttribute("aria-hidden","true"),t.style.maxHeight="0px"))})})(),$(function(){var t={finish:500,without_finish:300,rought:200,fine:400},a=$("#variant"),e=$("#area"),s=$(".calculate-way .value"),n=$(".selected-sum");function l(){return parseFloat((e.val()||"").replace(",","."))||0}function o(){var e=a.val();return t[e]||0}function i(){var e=l(),t=o()*e,a=0,i=($(".service:checked").each(function(){a+=parseFloat($(this).data("price"))||0}),0),r=($(".subservice:checked").each(function(){i+=(parseFloat($(this).data("price"))||0)*e}),s.text(o()+" ₽/м²"),n.text((t+a+i).toLocaleString("ru-RU")+" руб."),$("#selectedParams")),c=(r.empty(),l()),t=$("#variant option:selected").text();t&&r.append("<li>"+t+" — "+o()+" ₽/м²</li>"),$(".service:checked").each(function(){var e=$(this).data("name"),t=parseFloat($(this).data("price"))||0;e&&r.append("<li>"+e+" — "+t.toLocaleString("ru-RU")+" ₽</li>")}),$(".subservice:checked").each(function(){var e=$(this).closest(".panel__row").find(".panel-toggle__title").text().trim(),t=parseFloat($(this).data("price"))||0,a=t*c;e&&r.append("<li>"+e+" — "+t+" ₽/м² ("+a.toLocaleString("ru-RU")+" ₽)</li>")})}a.on("change",i),e.on("input change",i),$(document).on("change",".service, .subservice",i),i()});
//# sourceMappingURL=calculator.js.map
